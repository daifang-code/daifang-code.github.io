
<!DOCTYPE html>
<html lang="zh">

<head>
    <link href='./theme/fonts/googleapis.css' rel='stylesheet' type='text/css'>
    <link href="./theme/stylesheet/normalize.min.css">
    <script src="./theme/javascript/jquery.min.js"></script>
    <script type="text/javascript" src="./tipuesearch_content.js"></script>
    <link rel="stylesheet" href="./theme/tipuesearch/css/tipuesearch.css">
    <script type="text/javascript" src="./theme/tipuesearch/tipuesearch_set.js"></script>
    <script type="text/javascript" src="./theme/tipuesearch/tipuesearch.js"></script>

        <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.css">

    <link rel="stylesheet" type="text/css"
          href="./theme/pygments/xcode.min.css">
    <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/font-awesome.min.css">





    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>     <meta name="robots" content=""/>      <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">  <meta name="author" content="Shellcheck" />
<meta name="description" content="foo appears unused. Verify it or export it." />
<meta name="keywords" content="Shell">

<meta property="og:site_name" content="Pinpoint Document"/>
<meta property="og:title" content="Unused variable"/>
<meta property="og:description" content="foo appears unused. Verify it or export it."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./SC2034-en.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2024-09-28 09:33:06.120829+08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="./author/shellcheck.html">
<meta property="article:section" content="Checkers/Shell"/>
<meta property="article:tag" content="Shell"/>
<meta property="og:image" content="">

    <title>Pinpoint Document &ndash; Unused variable</title>

</head>

<body style="display: none;">

<aside>
    <div>
        <a href=".">
                <img src="./theme/img/profile.png" alt="Pinpoint Document" title="Pinpoint Document">
        </a>
        <h1><a href=".">Pinpoint Document</a></h1>

        <div style="padding-left: 0">
            <form action="./search.html" onsubmit="return validateForm(this.elements['q'].value);">
                <input id="tipue_search_input" type="text" name="q" placeholder="输入以搜索">
            </form>
        </div>


        <ul class="global_lang">
                    <li><a href="javascript:void(0);"
                                                                                  language-link="en">en</a>
                    </li>
                    <li class="active"><a href="javascript:void(0);"
                                                                                  language-link="zh">zh</a>
                    </li>
        </ul>

        <!--  -->

        <nav>
            <ul class="list">
                    <li>
                        <a href="./standard/language-independent.html">Language Independent 缺陷文档</a>
                        (3)
                    </li>
                    <li>
                        <a href="./standard/c.html">c/c++ 缺陷文档</a>
                        (316)
                    </li>
                    <li>
                        <a href="./standard/csharp.html">csharp 缺陷文档</a>
                        (39)
                    </li>
                    <li>
                        <a href="./standard/golang.html">golang 缺陷文档</a>
                        (34)
                    </li>
                    <li>
                        <a href="./standard/java.html">java 缺陷文档</a>
                        (555)
                    </li>
                    <li>
                        <a href="./standard/javascript.html">javascript 缺陷文档</a>
                        (295)
                    </li>
                    <li>
                        <a href="./standard/objective-c.html">objective-c 缺陷文档</a>
                        (124)
                    </li>
                    <li>
                        <a href="./standard/php.html">php 缺陷文档</a>
                        (58)
                    </li>
                    <li>
                        <a href="./standard/python.html">python 缺陷文档</a>
                        (618)
                    </li>
                    <li>
                        <a href="./standard/swift.html">swift 缺陷文档</a>
                        (26)
                    </li>

            </ul>
        </nav>

        <ul class="social">
        </ul>
    </div>


</aside>
<main>
  <article class="single">
  <header>
    <div class="breadcrumb">
      <ol>
        <li>
              <a href="./standard/shell.html">shell</a>
        </li>
        <li>
            <a href="./standard/style-issues.html">风格问题</a>
        </li>
        <li>
            <a href="./category/code-style-and-efficiency.html">代码风格和效率</a>
        </li>
        
    </ol>
    
    </div>

    <h1 id="SC2034">Unused variable</h1>
    <p>
        在 九月 28, 2024 发布于 <a href="./category/code-style-and-efficiency.html">代码风格和效率</a> 分类

        &#8226; 2 min read
    </p>
  </header>

    <div class="toc">
<ul>
<li><a href="#foo-appears-unused-verify-it-or-export-it">foo appears unused. Verify it or export it.</a><ul>
<li><a href="#problematic-code">Problematic code:</a></li>
<li><a href="#correct-code">Correct code:</a></li>
<li><a href="#rationale">Rationale:</a></li>
<li><a href="#exceptions">Exceptions</a><ul>
<li><a href="#indirection">Indirection</a></li>
<li><a href="#intentionally-unused-variables">Intentionally unused variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

  <div>
    
<h1 id="foo-appears-unused-verify-it-or-export-it">foo appears unused. Verify it or export it.</h1>
<h3 id="problematic-code">Problematic code:</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">foo</span><span class="o">=</span><span class="m">42</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$FOO</span><span class="s2">"</span>
</pre></div>
</td></tr></table>
<h3 id="correct-code">Correct code:</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">foo</span><span class="o">=</span><span class="m">42</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$foo</span><span class="s2">"</span>
</pre></div>
</td></tr></table>
<h3 id="rationale">Rationale:</h3>
<p>Variables not used for anything are often associated with bugs, so ShellCheck warns about them.</p>
<p>Also note that something like <code>local let foo=42</code> does not make a <code>let</code> statement local -- it instead declares an additional local variable named <code>let</code>.</p>
<h3 id="exceptions">Exceptions</h3>
<p>This warning may be falsely emitted when a variable is only referenced indirectly, and for variables that are intentionally unused.</p>
<h4 id="indirection">Indirection</h4>
<p>It's ShellCheck's intended behavior to emit this warning for any variable that is only referenced though indirection:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span># foo generates a warning, even though it has five indirect references
foo=42     
name=foo
echo "<span class="cp">${</span><span class="err">!</span><span class="n">name</span><span class="cp">}</span> $((name))"
export "<span class="nv">$name</span>"; eval "echo <span class="nv">$name</span>"
declare -n name; echo "<span class="nv">$name</span>"
</pre></div>
</td></tr></table>
<p>This is an intentional design decision and not a bug. If you have variables that will not have direct references, consider using an associative array in bash, or just [[Ignore]] the warning. </p>
<p>Tracking indirect references is a common problem for compilers and static analysis tool, and it is known to be unsolvable in the most general case. There are two ways to handle unresolved indirections (which in a realistic program will essentially be all of them):</p>
<ul>
<li>Avoid false positives by assuming all variables may potentially be used (disable all unused variable warnings)</li>
<li>Keep true positives by allowing some false positives (emit unused variable warnings that may be incorrect)</li>
</ul>
<p>Compilers are forced to do the former, but static analysis tools generally do the latter. This includes <code>pylint</code>, <code>jshint</code> and <code>shellcheck</code> itself. This is a design decision meant to make the tools more helpful at the expense of some noise. For consistency and to avoid giving the impression that it should work more generally, ShellCheck does not attempt to resolve even trivial indirections.</p>
<h4 id="intentionally-unused-variables">Intentionally unused variables</h4>
<p>For throwaway variables, consider using <code>_</code> as a dummy:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nb">read</span> _ last _ zip _ _ <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$str</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$last</span><span class="s2">, </span><span class="nv">$zip</span><span class="s2">"</span>
</pre></div>
</td></tr></table>
<p>or if you prefer to keep the names, use a directive to disable the warning:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># shellcheck disable=SC2034  # Unused variables left for readability</span>
<span class="nb">read</span> first last email zip lat lng <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$str</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$last</span><span class="s2">, </span><span class="nv">$zip</span><span class="s2">"</span>
</pre></div>
</td></tr></table>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/shell.html">Shell</a>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>
    <footer>
 <p>
  &copy; Pinpoint 2016-Present, Pinpoint 源代码静态缺陷分析系统, 源伞科技有限公司 - 保留所有权利
</p>

<p>
</p>     </footer>
</main>

  <script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Pinpoint Document ",
  "url" : ".",
  "image": "",
  "description": "Manual and documents for Sourcebrella Pinpoint"
}
</script> 
<div id="initDiv"
     style="position: fixed; z-index: 1000; background-color: white; top: 0; right: 0; bottom: 0; left: 0; "></div>
<script type="text/javascript">
    window.onload = function () {
        document.getElementsByTagName('body')[0].style.display = "block";
        document.getElementById('initDiv').style.display = 'none';

        document.querySelectorAll('.global_lang li a').forEach(elm => {
            elm.addEventListener('click', (e) => {
                var lang = e.target.getAttribute('language-link');
                var abs_url = '/' + lang + '/';
                var reg = /\/(en|zh)\//;
                var newRef;
                var location = window.location;
                if (reg.test(location.href)) {
                    newRef = location.href.replace(reg, abs_url);
                } else {
                    var match = /\/(output|docs)\//.exec(window.location.href);
                    if (match) {
                        newRef = window.location.href.replace(match[0], '/' + match[1] + abs_url)
                    } else {
                        return;
                    }
                }
                window.open(newRef, '_self')
            })
        })
    };

</script>
</body>

</html>