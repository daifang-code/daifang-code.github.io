
<!DOCTYPE html>
<html lang="zh">

<head>
    <link href='../../../theme/fonts/googleapis.css' rel='stylesheet' type='text/css'>
    <link href="../../../theme/stylesheet/normalize.min.css">
    <script src="../../../theme/javascript/jquery.min.js"></script>
    <script type="text/javascript" src="../../../tipuesearch_content.js"></script>
    <link rel="stylesheet" href="../../../theme/tipuesearch/css/tipuesearch.css">
    <script type="text/javascript" src="../../../theme/tipuesearch/tipuesearch_set.js"></script>
    <script type="text/javascript" src="../../../theme/tipuesearch/tipuesearch.js"></script>

        <link rel="stylesheet" type="text/css" href="../../../theme/stylesheet/style.css">

    <link rel="stylesheet" type="text/css"
          href="../../../theme/pygments/xcode.min.css">
    <link rel="stylesheet" type="text/css" href="../../../theme/font-awesome/css/font-awesome.min.css">





    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>     <meta name="robots" content=""/>      <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">      <meta name="author" content="Pinpoint Team"/>
    <meta name="description" content="Manual and documents for Sourcebrella Pinpoint"/> <meta property="og:site_name" content="Pinpoint Document"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Pinpoint Document"/>
<meta property="og:description" content="Manual and documents for Sourcebrella Pinpoint"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="../../.."/>
 
    <title>Pinpoint Document &ndash; Category</title>

</head>

<body style="display: none;">

<aside>
    <div>
        <a href="../../..">
                <img src="../../../theme/img/profile.png" alt="Pinpoint Document" title="Pinpoint Document">
        </a>
        <h1><a href="../../..">Pinpoint Document</a></h1>

        <div style="padding-left: 0">
            <form action="../../../search.html" onsubmit="return validateForm(this.elements['q'].value);">
                <input id="tipue_search_input" type="text" name="q" placeholder="输入以搜索">
            </form>
        </div>


        <ul class="global_lang">
                    <li><a href="javascript:void(0);"
                                                                                  language-link="en">en</a>
                    </li>
                    <li class="active"><a href="javascript:void(0);"
                                                                                  language-link="zh">zh</a>
                    </li>
        </ul>

        <!--  -->

        <nav>
            <ul class="list">
                    <li>
                        <a href="../../../standard/language-independent.html">Language Independent 缺陷文档</a>
                        (3)
                    </li>
                    <li>
                        <a href="../../../standard/c.html">c/c++ 缺陷文档</a>
                        (316)
                    </li>
                    <li>
                        <a href="../../../standard/csharp.html">csharp 缺陷文档</a>
                        (39)
                    </li>
                    <li>
                        <a href="../../../standard/golang.html">golang 缺陷文档</a>
                        (34)
                    </li>
                    <li>
                        <a href="../../../standard/java.html">java 缺陷文档</a>
                        (555)
                    </li>
                    <li>
                        <a href="../../../standard/javascript.html">javascript 缺陷文档</a>
                        (295)
                    </li>
                    <li>
                        <a href="../../../standard/objective-c.html">objective-c 缺陷文档</a>
                        (124)
                    </li>
                    <li>
                        <a href="../../../standard/php.html">php 缺陷文档</a>
                        (58)
                    </li>
                    <li>
                        <a href="../../../standard/python.html">python 缺陷文档</a>
                        (618)
                    </li>
                    <li>
                        <a href="../../../standard/swift.html">swift 缺陷文档</a>
                        (26)
                    </li>

            </ul>
        </nav>

        <ul class="social">
        </ul>
    </div>


</aside>
<main>
          <article>
            <h1>
            隐私数据泄露 (11)
            </h1>
        </article>
        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="BE0099">敏感数据传入潜在的不安全API</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞利用威胁</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>Black Hole Vulnerability</p>
<h1 id="_2">漏洞利用威胁</h1>
<p>高危</p>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/c.html">c</a>
                <a href="../../../tag/java.html">java</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE1101">文件揭露</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
<li><a href="#_4">缓解与预防</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#_6">漏洞代码示例</a></li>
</ul>
</li>
<li><a href="#_7">参考资料</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>在当前环境下，文件或目录应该处于不可访问状态，但实际上是能够被外界访问到的。</p>
<h1 id="_2">漏洞与风险</h1>
<p>如果攻击者能够访问到一些包含敏感信息的文件，那么他们可能会一路跟踪下去，以伺机寻找更多的攻击机会。</p>
<h1 id="_3">漏洞利用威胁</h1>
<p>中</p>
<h1 id="_4">缓解与预防</h1>
<ul>
<li>视所有的输入为危险的数据，通过使用白名单等的受信输入验证策略来严格清洗输入数据。</li>
<li>了解不受信的用户输入会从什么地方侵入到程序中。</li>
</ul>
<h1 id="_5">演示实例</h1>
<h3 id="_6">漏洞代码示例</h3>
<p>以下的代码没有对不受信的用户输入进行验证，直接将其用来构造转发路径：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">&lt;%</span> <span class="n">String</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"retUrl"</span><span class="o">);</span> <span class="k">%&gt;</span>
<span class="k">&lt;jsp:include page="&lt;%ret%&gt;</span>;" /&gt;
</pre></div>
</td></tr></table>
<h1 id="_7">参考资料</h1>
<div class="footnote">
<hr/>
<ol>
<li id="fn-cwe">
<p>https://cwe.mitre.org/data/definitions/552.html <a class="footnote-backref" href="#fnref-cwe" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE1114">应慎用或禁用的标准库函数</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
<li><a href="#_4">缓解与预防</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#_6">漏洞代码示例</a></li>
<li><a href="#_7">修复代码示例</a></li>
</ul>
</li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>以往设计的一些标准库函数存在缺陷，应该慎用或禁用存在缺陷的标准库函数。</p>
<p>存在缺陷的标准库函数：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>危险性</th>
<th>解决方案</th>
</tr>
</thead>
<tbody>
<tr>
<td>gets</td>
<td>最高</td>
<td>禁用gets(buf)，改用fgets(buf, size, stdin)</td>
</tr>
<tr>
<td>strcpy</td>
<td>高</td>
<td>检查目标缓冲区大小，或改用strncpy，或动态分配目标缓冲区</td>
</tr>
<tr>
<td>strcat</td>
<td>高</td>
<td>改用strncat</td>
</tr>
<tr>
<td>sprintf</td>
<td>高</td>
<td>改用snprintf，或使用精度说明符</td>
</tr>
<tr>
<td>scanf</td>
<td>高</td>
<td>使用精度说明符，或自己进行解析</td>
</tr>
<tr>
<td>sscanf</td>
<td>高</td>
<td>使用精度说明符，或自己进行解析</td>
</tr>
<tr>
<td>fscanf</td>
<td>高</td>
<td>使用精度说明符，或自己进行解析</td>
</tr>
<tr>
<td>vfscanf</td>
<td>高</td>
<td>使用精度说明符，或自己进行解析</td>
</tr>
<tr>
<td>vsprintf</td>
<td>高</td>
<td>改为使用vsnprintf，或使用精度说明符</td>
</tr>
<tr>
<td>vscanf</td>
<td>高</td>
<td>使用精度说明符，或自己进行解析</td>
</tr>
<tr>
<td>vsscanf</td>
<td>高</td>
<td>使用精度说明符，或自己进行解析</td>
</tr>
<tr>
<td>streadd</td>
<td>高</td>
<td>确保分配的目标参数缓冲区大小是源参数大小的四倍</td>
</tr>
<tr>
<td>strecpy</td>
<td>高</td>
<td>确保分配的目标参数缓冲区大小是源参数大小的四倍</td>
</tr>
<tr>
<td>strtrns</td>
<td>高</td>
<td>手工检查目标缓冲区大小是否至少与源字符串相等</td>
</tr>
<tr>
<td>getenv</td>
<td>高</td>
<td>不可假定特殊环境变量的长度</td>
</tr>
<tr>
<td>realpath</td>
<td>高(或稍低，实现依赖)</td>
<td>分配缓冲区大小为PATH_MAX字节，并手工检查参数以确保输入参数和输出参数均不超过PATH_MAX</td>
</tr>
<tr>
<td>syslog</td>
<td>高(或稍低，实现依赖)</td>
<td>将字符串输入传递给该函数之前，将所有字符串输入截成合理大小</td>
</tr>
<tr>
<td>getopt</td>
<td>高(或稍低，实现依赖)</td>
<td>将字符串输入传递给该函数之前，将所有字符串输入截成合理大小</td>
</tr>
<tr>
<td>getopt_long</td>
<td>高(或稍低，实现依赖)</td>
<td>将字符串输入传递给该函数之前，将所有字符串输入截成合理大小</td>
</tr>
<tr>
<td>getpass</td>
<td>高(或稍低，实现依赖)</td>
<td>将字符串输入传递给该函数之前，将所有字符串输入截成合理大小</td>
</tr>
<tr>
<td>getchar</td>
<td>中</td>
<td>若在循环中使用该函数，确保检查缓冲区边界</td>
</tr>
<tr>
<td>fgetc</td>
<td>中</td>
<td>若在循环中使用该函数，确保检查缓冲区边界</td>
</tr>
<tr>
<td>getc</td>
<td>中</td>
<td>若在循环中使用该函数，确保检查缓冲区边界</td>
</tr>
<tr>
<td>read</td>
<td>中</td>
<td>若在循环中使用该函数，确保检查缓冲区边界</td>
</tr>
<tr>
<td>bcopy</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>fgets</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>memcpy</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>snprintf</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>strccpy</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>strcadd</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>strncpy</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
<tr>
<td>vsnprintf</td>
<td>低</td>
<td>确保目标缓冲区不小于指定长度</td>
</tr>
</tbody>
</table>
<h1 id="_2">漏洞与风险</h1>
<p>引起缓冲区溢出问题</p>
<h1 id="_3">漏洞利用威胁</h1>
<p>高</p>
<h1 id="_4">缓解与预防</h1>
<p>慎用或禁用列表中的标准库函数</p>
<h1 id="_5">演示实例</h1>
<h3 id="_6">漏洞代码示例</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>void BadFunc(char *src)
{
    char *dst = new char[5];
    strcpy(dst, src);
    ...
}
</pre></div>
</td></tr></table>
<h3 id="_7">修复代码示例</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>void GoodFunc(char *src, size_t srcLen)
{
    char *dst = new char[5];
    if(srcLen &lt; 5)
    {
        strcpy(dst, src);
    }
    ...
}
</pre></div>
</td></tr></table>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/c.html">C</a>
                <a href="../../../tag/cpp.html">CPP</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE7488">Cookie中潜在的敏感数据</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
<li><a href="#_4">引用</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>Cookie中潜在的敏感数据</p>
<h1 id="_2">漏洞与风险</h1>
<p><p>存储在自定义cookie中的信息不应该是敏感的或与会话相关的。
在大多数情况下，敏感数据应该只存储在会话中，并由用户的会话cookie引用。
参考HttpSession(HttpServletRequest.getSession())
定制cookie可以用于需要比特定会话独立的信息。</p>
<p>定制cookie可以被用于需要比特定会话存在时间长的并且独立于一个特定会话的信息中。</p></p>
<h1 id="_3">漏洞利用威胁</h1>
<p>高</p>
<h1 id="_4">引用</h1>
<p><a href="http://cwe.mitre.org/data/definitions/315.html">CWE-315: Cleartext Storage of Sensitive Information in a Cookie</a></p>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                <a href="../../../tag/find-sec-bugs.html">FIND-SEC-BUGS</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE7390">类扩展Servlet类并使用实例变量</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>类扩展Servlet类并使用实例变量</p>
<h1 id="_2">漏洞与风险</h1>
<p><p>此类从Servlet类扩展，并使用实例成员变量。由于J2EE框架只创建了一个Servlet类实例，并以多线程方式使用，因此很可能存在问题，非常不鼓励这种方式。仅考虑使用方法局部变量。</p></p>
<h1 id="_3">漏洞利用威胁</h1>
<p>高</p>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                <a href="../../../tag/find-bugs.html">FIND-BUGS</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE1081">隐私侵犯</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
<li><a href="#_4">缓解与预防</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#_6">漏洞代码示例</a></li>
</ul>
</li>
<li><a href="#_7">参考资料</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>该软件没有合理地阻止用户访问私有信息（例如信用卡号）。这类用户可能没有经过明确的授权，或没有获得私有信息所有人的同意。</p>
<h1 id="_2">漏洞与风险</h1>
<p>当没有正确处理好私有信息（例如消费者的密码或社保卡号）时，程序将有可能置用户的隐私于危险之中，很多时候这是法律所不允许的。尽管私有信息的暴露不会对程序运行的正确性有必然的影响，甚至开发者因为某些原因特地这么做，但这对私有信息所有人来说，他们是不想看到这类事情的发生的（当然，法律也明文禁止这样的行为）。</p>
<h1 id="_3">漏洞利用威胁</h1>
<p>中</p>
<h1 id="_4">缓解与预防</h1>
<h1 id="_5">演示实例</h1>
<h3 id="_6">漏洞代码示例</h3>
<p>下面的代码利用用户的位置信息来确定用户当前所在的州：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_FINE_LOCATION"</span><span class="nt">/&gt;</span>
</pre></div>
</td></tr></table>
<p>首先，程序必须<code>manifest.xml</code>文件中明确声明运行该程序需要<code>ACCESS_FINE_LOCATION</code>权限。</p>
<p>在程序运行过程中，<code>getLastLocation()</code>会基于程序的位置权限来返回一个位置信息。在这种情况下，程序拥有获取用户最精准的位置的权限：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">locationClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocationClient</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
<span class="n">locationClient</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>
<span class="n">Location</span> <span class="n">userCurrLocation</span><span class="o">;</span>
<span class="n">userCurrLocation</span> <span class="o">=</span> <span class="n">locationClient</span><span class="o">.</span><span class="na">getLastLocation</span><span class="o">();</span>
<span class="n">deriveStateFromCoords</span><span class="o">(</span><span class="n">userCurrLocation</span><span class="o">);</span>
</pre></div>
</td></tr></table>
<p>尽管程序需要用户的位置信息，但它大可不必为此取得<code>ACCESS_FINE_LOCATION</code>的权限，因为<code>ACCESS_COARSE_LOCATION</code>权限足以让程序知道当前用户所处的州。</p>
<h1 id="_7">参考资料</h1>
<div class="footnote">
<hr/>
<ol>
<li id="fn-cwe">
<p>https://cwe.mitre.org/data/definitions/359.html <a class="footnote-backref" href="#fnref-cwe" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE0087">泄漏敏感数据</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">缓解与预防</a></li>
<li><a href="#_4">漏洞利用威胁</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#1">漏洞代码示例 1</a></li>
<li><a href="#1_1">漏洞代码修复示例 1</a></li>
<li><a href="#2">漏洞代码示例 2</a></li>
<li><a href="#2_1">漏洞代码修复示例 2</a></li>
</ul>
</li>
<li><a href="#_6">引用</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>记录对于调试，事件响应和收集数据至关重要。 尽管如此，记录敏感数据引发了许多担忧，包括利益相关方的隐私权，法律对个人信息收集的限制，以及内部人员暴露数据的可能性。 敏感信息包括但不限于IP地址，用户名和密码，电子邮件地址，信用卡号以及任何个人身份信息，如社会安全号码。 许多国家禁止或限制收集个人资料; 其他人仅允许以匿名形式保留个人数据。 例如，将未加密的信用卡号码泄漏到日志文件中可能违反了PCI DSS（支付卡行业数据安全标准）规定[PCI 2010]。 因此，日志不得包含敏感数据，特别是在法律禁止的情况下。</p>
<h1 id="_2">漏洞与风险</h1>
<p>不幸的是，违反这一规则是很常见的。例如，在版本0.8.1之前，LineControl Java客户端记录了敏感信息，包括本地用户的密码，如CVE-2005-2990所述。</p>
<p>java.util.logging类为JDK 1.4及更高版本提供了基本的日志框架。其他日志框架存在，但基本原则适用于所选的特定日志框架。</p>
<p>程序通常支持不同级别的保护。某些信息（如访问时间）可以安全记录。一些信息可以被记录下来，但是日志文件必须受限于每个人，但特定的管理员。其他信息（如信用卡号）只能以加密形式包含在日志中。密码等信息不应该被记录。</p>
<p>对于下面的代码示例，日志位于正在记录的信息的信任边界之外。此外，正常的日志消息应该包含其他参数，例如日期，时间，源事件等等。为简洁起见，下面的代码示例中省略了这些信息。</p>
<h1 id="_3">缓解与预防</h1>
<p>在传输之前使用可靠的加密方案加密数据。</p>
<p>在使用带有SSL的Web应用程序时，请将SSL用于整个会话，从登录到登出，而不仅仅是初始登录页面。</p>
<p>使用需要手动（人工）分析的工具和技术，例如渗透测试，威胁建模和交互式工具，以便测试人员记录和修改活动会话。 这些可能比严格的自动化技术更有效。 尤其是与设计和业务规则相关的弱点。</p>
<p>配置服务器以使用加密通道进行通信，其中可能包括SSL或其他安全协议。</p>
<h1 id="_4">漏洞利用威胁</h1>
<p>严重</p>
<h1 id="_5">演示实例</h1>
<h3 id="1">漏洞代码示例 1</h3>
<p>在这个漏洞代码示例中，服务器在出现安全异常时记录远程客户端的IP地址。例如，这些数据可能会被误用来构建用户浏览习惯的配置文件。 这种日志记录可能会违反许多国家的法律限制。</p>
<p>当日志不能包含IP地址时，它不应该包含有关SecurityException的任何信息，因为它可能会泄漏IP地址。 当异常包含敏感信息时，自定义的MyExceptionReporter类应该在将控制权返回给catch块中的下一条语句之前提取或清除它。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">logRemoteIPAddress</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="s">"com.organization.Log"</span><span class="o">);</span>
  <span class="n">InetAddress</span> <span class="n">machine</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">machine</span> <span class="o">=</span> <span class="n">InetAddress</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnknownHostException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Exception</span> <span class="n">e</span> <span class="o">=</span> <span class="n">MyExceptionReporter</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SecurityException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Exception</span> <span class="n">e</span> <span class="o">=</span> <span class="n">MyExceptionReporter</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">severe</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="n">machine</span><span class="o">.</span><span class="na">getHostAddress</span><span class="o">()</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span>
                  <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<h3 id="1_1">漏洞代码修复示例 1</h3>
<p>除了由MyExceptionReporter隐式执行的日志记录外，此漏洞代码修复示例不记录安全性异常：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">catch</span> <span class="o">(</span><span class="n">SecurityException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Exception</span> <span class="n">e</span> <span class="o">=</span> <span class="n">MyExceptionReporter</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<h3 id="2">漏洞代码示例 2</h3>
<p>出于安全原因，包含敏感信息的日志消息不应打印到控制台显示屏上（敏感信息的一个可能示例是乘客年龄）。 java.util.logging.Logger类支持不同的日志记录级别，可用于对这些信息进行分类：FINEST，FINER，FINE，CONFIG，INFO，WARNING和SEVERE。 默认情况下，INFO，WARNING和SEVERE级别将消息打印到控制台，最终用户和系统管理员可以访问该控制台。
如果我们假设乘客年龄可能出现在当前系统的日志文件中，但不在控制台显示屏上，则此代码示例不合规。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Age: "</span> <span class="o">+</span> <span class="n">passengerAge</span><span class="o">);</span>
</pre></div>
</td></tr></table>
<h3 id="2_1">漏洞代码修复示例 2</h3>
<p>此漏洞代码修复示例将乘客使用年限记录在FINEST级别，以防止在控制台上显示此信息。如前所述，我们假设年龄可能出现在系统日志文件中，但不在控制台上。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Make sure that all handlers only print log messages rated INFO or higher</span>
<span class="n">Handler</span> <span class="n">handlers</span><span class="o">[]</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="na">getHandlers</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">handlers</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">handlers</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">setLevel</span><span class="o">(</span><span class="n">Level</span><span class="o">.</span><span class="na">INFO</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">// ...</span>
<span class="n">logger</span><span class="o">.</span><span class="na">finest</span><span class="o">(</span><span class="s">"Age: "</span> <span class="o">+</span> <span class="n">passengerAge</span><span class="o">);</span>
</pre></div>
</td></tr></table>
<h1 id="_6">引用</h1>
<div class="footnote">
<hr/>
<ol>
<li id="fn-cwe">
<p>http://cwe.mitre.org/data/definitions/319.html <a class="footnote-backref" href="#fnref-cwe" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn-CERT">
<p>https://wiki.sei.cmu.edu/confluence/display/java/FIO13-J.+Do+not+log+sensitive+information+outside+a+trust+boundary.html <a class="footnote-backref" href="#fnref-CERT" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
</ol>
</div>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/c.html">C</a>
                <a href="../../../tag/c.html">C++</a>
                <a href="../../../tag/java.html">Java</a>
                <a href="../../../tag/cwe-319.html">CWE-319</a>
                <a href="../../../tag/find-bugs.html">FIND-BUGS</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE0134">暴露URL中的会话ID</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">缓解与预防</a></li>
<li><a href="#_4">漏洞利用威胁</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#_6">漏洞代码示例</a></li>
<li><a href="#_7">修复建议</a></li>
</ul>
</li>
<li><a href="#_8">引用</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>如果浏览器不支持Cookie或用户阻止了所有Cookie，可以把会话ID附加在HTML页面中所有的URL上，这些页面作为响应发送给客户。这样，当用户单击URL时，会话ID被自动作为请求行的一部分而不是作为头行发送回服务器。这种方法称为URL重写(URL rewriting)。</p>
<h1 id="_2">漏洞与风险</h1>
<p>使用URL重写，会将URL中的会话ID暴露给攻击者，使得攻击者可以未经身份验证进入系统，获取系统的敏感数据。</p>
<h1 id="_3">缓解与预防</h1>
<p>禁止使用URL重写，或者使用HTTP POST方法请求参数。</p>
<h1 id="_4">漏洞利用威胁</h1>
<p>严重</p>
<h1 id="_5">演示实例</h1>
<h3 id="_6">漏洞代码示例</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">encodeRedirectURL</span><span class="o">(</span><span class="s">"dfddf.jsp?ID=admin"</span><span class="o">));</span> 
</pre></div>
</td></tr></table>
<p>在上面的代码中，会话ID admin就被泄露。</p>
<h3 id="_7">修复建议</h3>
<p>改用HTTP POST方法请求参数。</p>
<h1 id="_8">引用</h1>
<div class="footnote">
<hr/>
<ol>
<li id="fn-CEW264">
<p>https://cwe.mitre.org/data/definitions/264.html <a class="footnote-backref" href="#fnref-CEW264" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn-OWASP-A2">
<p>https://www.owasp.org/index.php/Top_10-2017_A2-Broken_Authentication <a class="footnote-backref" href="#fnref-OWASP-A2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
</ol>
</div>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                <a href="../../../tag/find-sec-bugs.html">FIND-SEC-BUGS</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE7389">类扩展了Struts Action类并使用了实例变量</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>类扩展了Struts Action类并使用了实例变量</p>
<h1 id="_2">漏洞与风险</h1>
<p><p>此类从Struts Action类扩展，并使用实例成员变量。由于Struts框架只创建了struts Action类的一个实例，并以多线程方式使用，因此很可能存在问题，非常不鼓励这种方式。仅考虑使用方法局部变量。仅报告在监视器外部写入的实例字段。</p></p>
<h1 id="_3">漏洞利用威胁</h1>
<p>高</p>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                <a href="../../../tag/find-bugs.html">FIND-BUGS</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE1112">硬编码的密码</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">漏洞利用威胁</a></li>
<li><a href="#_4">缓解与预防</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#_6">漏洞代码示例</a></li>
<li><a href="#2">漏洞代码示例 2</a></li>
<li><a href="#3">漏洞代码示例 3</a></li>
</ul>
</li>
<li><a href="#_7">参考资料</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>该软件在入站认证过程或与外界设备进行的出站交流过程中使用了硬编码的密码。</p>
<h1 id="_2">漏洞与风险</h1>
<p>硬编码密码常常会引起严重的、连系统管理员也难以察觉的认证失败现象。尽管观测到了这一现象，系统管理员往往会因为问题难以修复，而被迫无奈将产品完全禁用。硬编码密码问题存在两种主要的形式：</p>
<ul>
<li>入站：软件的某个认证机制对硬编码密码进行检测。</li>
<li>出站：软件在与别的系统或组件连接的过程中使用了硬编码的密码。</li>
</ul>
<p>在入站问题上，软件中包含一个默认的管理员账户，与该账号相关联的一个简单的密码被硬编码到了产品中。该产品的每次安装使用的都是这个硬编码的密码，系统管理员无法更改或禁用这个密码，除非手动对程序源码进行修改，或者通过打补丁修复。如果这个密码被发现或公开（在Internet上这是很常见的一个现象），那么任何知道这一点的人都能够使用该产品。结果是，因为该产品的所有安装使用的都是同一个硬编码密码（这可能会涉及到不同的组织），像蠕虫之类的大型攻击将会有机可乘。</p>
<p>出站问题可以应用到与后端服务进行认证的前端系统中。后端系统可能会要求使用一个简单就能获取到的固定的密码。程序员可能会将后端用到的私密信息硬编码到前端软件中。任意的软件使用者都可能提取出这个密码信息。因为从二进制中提取出密码通常是轻而易举的，所以使用了硬编码密码的客户端系统往往存在更大的风险。</p>
<h1 id="_3">漏洞利用威胁</h1>
<p>中</p>
<h1 id="_4">缓解与预防</h1>
<ul>
<li>对出站的认证：将密码存储在源码之外的一个有强力的安全保护的、经加密的配置文件或数据库中，隔绝所有外来者对这些关键信息的访问。</li>
<li>对入站认证：在初始登录中，与其使用一个硬编码的默认用户名、密码账户，可以使用一种“初始登录”模式，要求用户输入一个独立的强密码。</li>
<li>对入站的认证：对密码使用单向的哈希加密，并将这些哈希值存储在有合理的访问控制的配置文件或数据库中</li>
</ul>
<h1 id="_5">演示实例</h1>
<h3 id="_6">漏洞代码示例</h3>
<p>以下的代码使用一个硬编码的密码来连接数据库：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="s">"scott"</span><span class="o">,</span> <span class="s">"tiger"</span><span class="o">);</span>
<span class="o">...</span>
</pre></div>
</td></tr></table>
<p>这是一个连接中客户端上存在硬编码密码的例子。虽然这段代码能够正常运行，但任何能够看到这段代码的人都能够清楚知道访问密码。像这样的程序一旦被交付，那么就没人能对密码为“tiger”的账号“scott”怎么样，除非对程序打补丁。狡猾的员工如果得知了这一信息，那么他就能过利用该信息入侵到系统中。更坏的情况是，如果攻击者拥有该应用的字节码，那么他们就能够通过<code>javap -c</code>来访问到反汇编代码，进而获取到各种密码的值。如下面例子所展示：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">javap</span> <span class="nt">-c</span> <span class="nt">ConnMngr</span><span class="p">.</span><span class="nc">class</span>
<span class="nt">22</span><span class="o">:</span> <span class="nt">ldc</span> <span class="p">#</span><span class="nn">36</span><span class="o">;</span> <span class="o">//</span><span class="nt">String</span> <span class="nt">jdbc</span><span class="p">:</span><span class="nd">mysql</span><span class="o">://</span><span class="nt">ixne</span><span class="p">.</span><span class="nc">com</span><span class="o">/</span><span class="nt">rxsql</span>
<span class="nt">24</span><span class="o">:</span> <span class="nt">ldc</span> <span class="p">#</span><span class="nn">38</span><span class="o">;</span> <span class="o">//</span><span class="nt">String</span> <span class="nt">scott</span>
<span class="nt">26</span><span class="o">:</span> <span class="nt">ldc</span> <span class="p">#</span><span class="nn">17</span><span class="o">;</span> <span class="o">//</span><span class="nt">String</span> <span class="nt">tiger</span>
</pre></div>
</td></tr></table>
<h3 id="2">漏洞代码示例 2</h3>
<p>以下是一个关于后端内部硬编码密码的例子：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">VerifyAdmin</span><span class="o">(</span><span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">password</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Mew!"</span><span class="o">))</span> <span class="o">{</span>
<span class="k">return</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="o">}</span>
<span class="c1">//Diagnostic Mode</span>
<span class="k">return</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<p>任何该程序的实体都能够使用相同的密码来进入诊断模式。如果程序是以二进制only（binary-only)的形式发行的话，那么情况会更加严重，因为想要改变该密码或禁用掉该功能都将变得十分困难。</p>
<h3 id="3">漏洞代码示例 3</h3>
<p>这个例子展示了含有明文的username/password对的属性文件：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="err">#</span> <span class="n">Java</span> <span class="n">Web</span> <span class="n">App</span> <span class="n">ResourceBundle</span> <span class="n">properties</span> <span class="n">file</span> 
<span class="o">...</span>
<span class="n">webapp</span><span class="o">.</span><span class="na">ldap</span><span class="o">.</span><span class="na">username</span><span class="o">=</span><span class="n">secretUsername</span>
<span class="n">webapp</span><span class="o">.</span><span class="na">ldap</span><span class="o">.</span><span class="na">password</span><span class="o">=</span><span class="n">secretPassword</span>
<span class="o">...</span>
</pre></div>
</td></tr></table>
<p>配置文件中不该包含用户名以及密码这样的信息，上述类似的属性文件也不该以明文方式存储这些信息，否则，任何能够访问这些文件的人都能够以此访问相应的资源。如果可能，那么请将这类信息加密，以避免出现<a href="http://cwe.mitre.org/data/definitions/260.html">CWE-260</a>或<a href="http://cwe.mitre.org/data/definitions/13.html">CWE-13</a>中的情况。</p>
<h1 id="_7">参考资料</h1>
<div class="footnote">
<hr/>
<ol>
<li id="fn-cwe">
<p>http://cwe.mitre.org/data/definitions/259.html <a class="footnote-backref" href="#fnref-cwe" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                <a href="../../../tag/find-sec-bugs.html">FIND-SEC-BUGS</a>
                </p>
            </div>
        </article>

        <article class="single">
            <header>
                <div class="breadcrumb">
                <ol>
                    <li>
                        <a href="../../../standard/java.html">java</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues.html">安全问题</a>
                    </li>
                    <li>
                            <a href="../../../subcategory/java/security issues/privacy leakage.html">隐私数据泄露</a>
                    </li>
                </ol>
                
                </div>

                <h1 id="PE0136">泄漏堆栈信息</h1>
                <p>
                    在 2024-九月-28 发布于 <a href="../../../category/privacy-leakage.html">隐私数据泄露</a> 分类

                    &#8226; 1 min read
                </p>
            </header>

                <div class="toc">
<ul>
<li><a href="#_1">缺陷描述</a></li>
<li><a href="#_2">漏洞与风险</a></li>
<li><a href="#_3">缓解与预防</a></li>
<li><a href="#_4">漏洞利用威胁</a></li>
<li><a href="#_5">演示实例</a><ul>
<li><a href="#_6">漏洞代码示例</a></li>
<li><a href="#_7">漏洞代码修复示例</a></li>
</ul>
</li>
<li><a href="#_8">引用</a></li>
</ul>
</div>

            <div>
                
<h1 id="_1">缺陷描述</h1>
<p>应用服务器配置允许将详细的错误信息（如：堆栈跟踪信息）返回给用户，这可能会暴露敏感信息或潜在的漏洞，如：已知含有漏洞的组件的版本信息。</p>
<h1 id="_2">漏洞与风险</h1>
<p>错误的日志处理机制向用户披露堆栈跟踪或其他大量错误信息。使攻击者能经常访问一些未授权的系统数据或功能。</p>
<h1 id="_3">缓解与预防</h1>
<p>禁止将堆栈信息输出到日志信息。</p>
<h1 id="_4">漏洞利用威胁</h1>
<p>严重</p>
<h1 id="_5">演示实例</h1>
<h3 id="_6">漏洞代码示例</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Example</span> <span class="o">{</span>
  <span class="k">try</span><span class="o">{</span>
    <span class="o">...</span>
    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="s">"lavasoft"</span><span class="o">);</span>  
      <span class="n">log</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">Level</span><span class="o">.</span><span class="na">INFO</span><span class="o">,</span> <span class="s">"dfsf"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">finally</span><span class="o">{</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<p>异常信息e被输出。</p>
<h3 id="_7">漏洞代码修复示例</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Example</span> <span class="o">{</span>
  <span class="k">try</span><span class="o">{</span>
    <span class="o">...</span>
    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="s">"lavasoft"</span><span class="o">);</span>  
      <span class="n">log</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">Level</span><span class="o">.</span><span class="na">INFO</span><span class="o">,</span> <span class="s">"dfsf"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">finally</span><span class="o">{</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<p>在日志信息中去掉异常信息。</p>
<h1 id="_8">引用</h1>
<div class="footnote">
<hr/>
<ol>
<li id="fn-CWE">
<p>https://cwe.mitre.org/data/definitions/200.html <a class="footnote-backref" href="#fnref-CWE" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
            </div>
            <div class="tag-cloud">
                <p>
                <a href="../../../tag/java.html">JAVA</a>
                </p>
            </div>
        </article>

    <footer>
 <p>
  &copy; Pinpoint 2016-Present, Pinpoint 源代码静态缺陷分析系统, 源伞科技有限公司 - 保留所有权利
</p>

<p>
</p>     </footer>
</main>

  <script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Pinpoint Document ",
  "url" : "../../..",
  "image": "",
  "description": "Manual and documents for Sourcebrella Pinpoint"
}
</script> 
<div id="initDiv"
     style="position: fixed; z-index: 1000; background-color: white; top: 0; right: 0; bottom: 0; left: 0; "></div>
<script type="text/javascript">
    window.onload = function () {
        document.getElementsByTagName('body')[0].style.display = "block";
        document.getElementById('initDiv').style.display = 'none';

        document.querySelectorAll('.global_lang li a').forEach(elm => {
            elm.addEventListener('click', (e) => {
                var lang = e.target.getAttribute('language-link');
                var abs_url = '/' + lang + '/';
                var reg = /\/(en|zh)\//;
                var newRef;
                var location = window.location;
                if (reg.test(location.href)) {
                    newRef = location.href.replace(reg, abs_url);
                } else {
                    var match = /\/(output|docs)\//.exec(window.location.href);
                    if (match) {
                        newRef = window.location.href.replace(match[0], '/' + match[1] + abs_url)
                    } else {
                        return;
                    }
                }
                window.open(newRef, '_self')
            })
        })
    };

</script>
</body>

</html>