<article class="bugdoc">
    <h2 class="bugdoc-title" id="Bug-Doc:PE2048">PE2048: key-spacing</h2>
    <h3>强制在对象字面量的键和值之间使用一致的空格 (key-spacing)</h3>
    <section id="tip">
     <h4 style="border-top: 0pt; padding: 0pt 4pt 4pt 4pt;">缺陷信息</h4>
                <dl>
                    <dt>缺陷ID</dt>
                    <dd>PE2048</dd>
                    <dt>标签</dt>
                    <dd></dd>
                    <dt>目录</dt>
                    <dd></dd>
                    <dt>作者</dt>
                    <dd>pinpoint</dd>
                </dl>
    <p>Licensed under the <a href="https://github.com/eslint/cn.eslint.org/blob/gh-pages/LICENSE">MIT License</a></p>
<h4>强制在对象字面量的键和值之间使用一致的空格 (key-spacing)</h4>
<p>(fixable) <a href="../user-guide/command-line-interface#fix">命令行</a>中的 <code>--fix</code> 选项可以自动修复一些该规则报告的问题。</p>
<p>该规则强制对象属性的冒号左右的空格的一致性。它可以单独验证每一个属性，或它可以确保对象中的属性在垂直方向上对齐。</p>
<h2>缺陷详因</h2>
<p>该规则强制在对象字面量的键和值之间使用一致的空格。如果某一行很长的话，在允许空白出现的情况下，可以增加一空行，这种情况是该规则可以接受的。</p>
<h2>修改方案</h2>
<p>该规则有一个对象选项：</p>
<ul>
<li><code>&quot;beforeColon&quot;: false (default) | true</code></li>
<li><code>&quot;beforeColon&quot;: false (默认) | true</code><ul>
<li><code>false</code>: 禁止在对象字面量的键和冒号之间存在空格</li>
<li><code>true</code>: 要求在对象字面量的键和冒号之间存在至少有一个空格</li>
</ul>
</li>
<li><code>&quot;afterColon&quot;: true (default) | false</code></li>
<li><code>&quot;afterColon&quot;: true (默认) | false</code><ul>
<li><code>true</code>: 要求在对象字面量的冒号和值之间存在至少有一个空格</li>
<li><code>false</code>: 禁止在对象字面量的冒号和值之间存在空格</li>
</ul>
</li>
<li><code>&quot;mode&quot;: &quot;strict&quot; (default) | &quot;minimum&quot;</code></li>
<li><code>&quot;mode&quot;: &quot;strict&quot; (默认) | &quot;minimum&quot;</code><ul>
<li><code>&quot;strict&quot;</code>: 强制在冒号前后只有一个空格</li>
<li><code>&quot;minimum&quot;</code>: 要求在冒号前后最少有一个空格</li>
</ul>
</li>
<li><code>&quot;align&quot;: &quot;value&quot; | &quot;colon&quot;</code></li>
<li><code>&quot;align&quot;: &quot;value&quot; | &quot;colon&quot;</code><ul>
<li><code>&quot;value&quot;</code>: 要求对象字面量中的值水平对齐</li>
<li><code>&quot;colon&quot;</code> 要求对象字面量中的冒号和值都水平对齐</li>
</ul>
</li>
<li><code>&quot;align&quot;</code> 允许细粒度的控制对象字面量值的间距直到对齐</li>
<li><code>&quot;singleLine&quot;</code> 为单行对象字面量指定一个空格风格</li>
<li><code>&quot;multiLine&quot;</code> 为多行对象字面量指定一个空格风格</li>
</ul>
<p>请注意，你可以使用顶级选项或分组选项 (<code>singleLine</code> 和 <code>multiLine</code>)，但不能同时使用两者。</p>
<h5>beforeColon</h5>
<p>默认选项 <code>{ &quot;beforeColon&quot;: false }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;beforeColon&quot;: false }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span> <span class="o">:</span> <span class="mi">42</span> <span class="p">};</span>
</pre></div>
<p>默认选项 <code>{ &quot;beforeColon&quot;: false }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;beforeColon&quot;: false }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">42</span> <span class="p">};</span>
</pre></div>
<p>选项 <code>{ &quot;beforeColon&quot;: true }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;beforeColon&quot;: true }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">42</span> <span class="p">};</span>
</pre></div>
<p>选项 <code>{ &quot;beforeColon&quot;: true }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;beforeColon&quot;: true }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span> <span class="o">:</span> <span class="mi">42</span> <span class="p">};</span>
</pre></div>
<h5>afterColon</h5>
<p>默认选项 <code>{ &quot;afterColon&quot;: true }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;afterColon&quot;: true }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span><span class="mi">42</span> <span class="p">};</span>
</pre></div>
<p>默认选项 <code>{ &quot;afterColon&quot;: true }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;afterColon&quot;: true }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">42</span> <span class="p">};</span>
</pre></div>
<p>选项 <code>{ &quot;afterColon&quot;: false }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;afterColon&quot;: false }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">42</span> <span class="p">};</span>
</pre></div>
<p>选项 <code>{ &quot;afterColon&quot;: false }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;afterColon&quot;: false }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span><span class="mi">42</span> <span class="p">};</span>
</pre></div>
<h5>mode</h5>
<p>默认选项 <code>{ &quot;mode&quot;: &quot;strict&quot; }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;mode&quot;: &quot;strict&quot; }]*/</span>

<span class="nx">call</span><span class="p">({</span>
    <span class="nx">foobar</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">bat</span><span class="o">:</span>    <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">});</span>
</pre></div>
<p>默认选项 <code>{ &quot;mode&quot;: &quot;strict&quot; }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;mode&quot;: &quot;strict&quot; }]*/</span>

<span class="nx">call</span><span class="p">({</span>
    <span class="nx">foobar</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">bat</span><span class="o">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">});</span>
</pre></div>
<p>选项 <code>{ &quot;mode&quot;: &quot;minimum&quot; }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;mode&quot;: &quot;minimum&quot; }]*/</span>

<span class="nx">call</span><span class="p">({</span>
    <span class="nx">foobar</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">bat</span><span class="o">:</span>    <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">});</span>
</pre></div>
<h5>align</h5>
<p>选项 <code>{ &quot;align&quot;: &quot;value&quot; }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;align&quot;: &quot;value&quot; }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="nx">value</span><span class="p">,</span>
    <span class="nx">bcde</span><span class="o">:</span>  <span class="mi">42</span><span class="p">,</span>
    <span class="nx">fg</span> <span class="o">:</span>   <span class="nx">foo</span><span class="p">()</span>
<span class="p">};</span>
</pre></div>
<p>选项 <code>{ &quot;align&quot;: &quot;value&quot; }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;align&quot;: &quot;value&quot; }]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span>    <span class="nx">value</span><span class="p">,</span>
    <span class="nx">bcde</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>

    <span class="nx">fg</span><span class="o">:</span> <span class="nx">foo</span><span class="p">(),</span>
    <span class="nx">h</span><span class="o">:</span>  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">ijkl</span><span class="o">:</span> <span class="s1">&#39;Non-consecutive lines form a new group&#39;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="nx">longPropertyName</span><span class="o">:</span> <span class="s2">&quot;bar&quot;</span> <span class="p">};</span>
</pre></div>
<p>选项 <code>{ &quot;align&quot;: &quot;colon&quot; }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;align&quot;: &quot;colon&quot; }]*/</span>

<span class="nx">call</span><span class="p">({</span>
    <span class="nx">foobar</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">bat</span><span class="o">:</span>    <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">});</span>
</pre></div>
<p>选项 <code>{ &quot;align&quot;: &quot;colon&quot; }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, { &quot;align&quot;: &quot;colon&quot; }]*/</span>

<span class="nx">call</span><span class="p">({</span>
    <span class="nx">foobar</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">bat</span>   <span class="o">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">});</span>
</pre></div>
<h5>align</h5>
<p><code>align</code> 选项可以通过 <code>beforeColon</code>、<code>afterColon</code>、<code>mode</code> 和 <code>on</code> 进行额外的配置。</p>
<p>如果 <code>align</code> 被定义为一个对象，但是没有提供所有的参数，那么，未定义的参数将默认为：</p>
<div class="highlight"><pre><span></span><span class="c1">// Defaults</span>
<span class="nx">align</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;beforeColon&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;afterColon&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;on&quot;</span><span class="o">:</span> <span class="s2">&quot;colon&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="s2">&quot;strict&quot;</span>
<span class="p">}</span>
</pre></div>
<p>选项 <code>{ &quot;align&quot;: { } }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, {</span>
<span class="cm">    &quot;align&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: true,</span>
<span class="cm">        &quot;afterColon&quot;: true,</span>
<span class="cm">        &quot;on&quot;: &quot;colon&quot;</span>
<span class="cm">    }</span>
<span class="cm">}]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;one&quot;</span>   <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;seven&quot;</span> <span class="o">:</span> <span class="mi">7</span>
<span class="p">}</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, {</span>
<span class="cm">    &quot;align&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: false,</span>
<span class="cm">        &quot;afterColon&quot;: false,</span>
<span class="cm">        &quot;on&quot;: &quot;value&quot;</span>
<span class="cm">    }</span>
<span class="cm">}]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;one&quot;</span><span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;seven&quot;</span><span class="o">:</span><span class="mi">7</span>
<span class="p">}</span>
</pre></div>
<h5>align and multiLine</h5>
<p><code>multiLine</code> 和 <code>align</code> 选项可以有所区别，这将允许对你的文件进行更细粒度的控制 <code>key-spacing</code>。如果 <code>align</code> 被配置为一个对象，<code>align</code> <strong>将不会</strong> 从 <code>multiLine</code> 继承。</p>
<p><code>multiLine</code> 可以在任何时候被用在跨行的对象字面量上。而当一个对象有多个属性时，使用 <code>align</code> 配置。</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myObj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">key1</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// uses multiLine</span>

  <span class="nx">key2</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// uses align (when defined)</span>
  <span class="nx">key3</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// uses align (when defined)</span>

  <span class="nx">key4</span><span class="o">:</span> <span class="mi">4</span> <span class="c1">// uses multiLine</span>
<span class="p">}</span>
</pre></div>
<p>选项 <code>{ &quot;align&quot;: { }, &quot;multiLine&quot;: { } }</code> 的 <strong>错误</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, {</span>
<span class="cm">    &quot;multiLine&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: false,</span>
<span class="cm">        &quot;afterColon&quot;:true</span>
<span class="cm">    },</span>
<span class="cm">    &quot;align&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: true,</span>
<span class="cm">        &quot;afterColon&quot;: true,</span>
<span class="cm">        &quot;on&quot;: &quot;colon&quot;</span>
<span class="cm">    }</span>
<span class="cm">}]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;myObjectFunction&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Do something</span>
    <span class="p">},</span>
    <span class="s2">&quot;one&quot;</span>             <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;seven&quot;</span>           <span class="o">:</span> <span class="mi">7</span>
<span class="p">}</span>
</pre></div>
<p>选项 <code>{ &quot;align&quot;: { }, &quot;multiLine&quot;: { } }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint key-spacing: [&quot;error&quot;, {</span>
<span class="cm">    &quot;multiLine&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: false,</span>
<span class="cm">        &quot;afterColon&quot;: true</span>

<span class="cm">    },</span>
<span class="cm">    &quot;align&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: true,</span>
<span class="cm">        &quot;afterColon&quot;: true,</span>
<span class="cm">        &quot;on&quot;: &quot;colon&quot;</span>
<span class="cm">    }</span>
<span class="cm">}]*/</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;myObjectFunction&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Do something</span>
        <span class="c1">//</span>
    <span class="p">},</span> <span class="c1">// These are two separate groups, so no alignment between `myObjectFuction` and `one`</span>
    <span class="s2">&quot;one&quot;</span>   <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;seven&quot;</span> <span class="o">:</span> <span class="mi">7</span> <span class="c1">// `one` and `seven` are in their own group, and therefore aligned</span>
<span class="p">}</span>
</pre></div>
<h5>singleLine and multiLine</h5>
<p>选项 <code>{ &quot;singleLine&quot;: { }, &quot;multiLine&quot;: { } }</code> 的 <strong>正确</strong> 代码示例：</p>
<div class="highlight"><pre><span></span><span class="cm">/*eslint &quot;key-spacing&quot;: [2, {</span>
<span class="cm">    &quot;singleLine&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: false,</span>
<span class="cm">        &quot;afterColon&quot;: true</span>
<span class="cm">    },</span>
<span class="cm">    &quot;multiLine&quot;: {</span>
<span class="cm">        &quot;beforeColon&quot;: true,</span>
<span class="cm">        &quot;afterColon&quot;: true,</span>
<span class="cm">        &quot;align&quot;: &quot;colon&quot;</span>
<span class="cm">    }</span>
<span class="cm">}]*/</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">one</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">three</span><span class="o">:</span> <span class="mi">3</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;two&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">three</span> <span class="o">:</span> <span class="mi">3</span>
<span class="p">};</span>
</pre></div>
<h2>当该情况下该规则可忽略</h2>
<p>对属性空格，如果你有其它约定，与上面可用的选项不一致；或者你允许同时使用多种风格，你可以关闭此规则。</p>
<h2>Eslint版本</h2>
<p>该规则在 ESLint 0.9.0 中被引入。</p>
<h2>来源</h2>
<ul>
<li><a href="https://github.com/eslint/eslint/tree/master/lib/rules/key-spacing.js">Rule source</a></li>
<li><a href="https://github.com/eslint/eslint/tree/master/docs/rules/key-spacing.md">Documentation source</a></li>
</ul>

    </section>
</article>
