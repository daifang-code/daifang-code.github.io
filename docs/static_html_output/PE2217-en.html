<article class="bugdoc">
    <h2 class="bugdoc-title" id="Bug-Doc:PE2217">PE2217: prefer-destructuring</h2>
    <h3>Prefer destructuring from arrays and objects (prefer-destructuring)</h3>
    <section id="tip">
     <h4 style="border-top: 0pt; padding: 0pt 4pt 4pt 4pt;">Bug info</h4>
                <dl>
                    <dt>BugTypeID</dt>
                    <dd>PE2217</dd>
                    <dt>Tags</dt>
                    <dd></dd>
                    <dt>Category</dt>
                    <dd></dd>
                    <dt>Authors</dt>
                    <dd>pinpoint</dd>
                </dl>
    <p>Licensed under the <a href="https://github.com/eslint/cn.eslint.org/blob/gh-pages/LICENSE">MIT License</a></p>
<h4>Prefer destructuring from arrays and objects (prefer-destructuring)</h4>
<p>With JavaScript ES6, a new syntax was added for creating variables from an array index or object property, called <a href="#further-reading">destructuring</a>.  This rule enforces usage of destructuring instead of accessing a property through a member expression.</p>
<h2>Rule Details</h2>
<h5>Options</h5>
<p>This rule takes two sets of configuration objects. The first object parameter determines what types of destructuring the rule applies to.</p>
<p>The two properties, <code>array</code> and <code>object</code>, can be used to turn on or off the destructuring requirement for each of those types independently. By default, both are true.</p>
<p>Alternatively, you can use separate configurations for different assignment types. It accepts 2 other keys instead of <code>array</code> and <code>object</code>.</p>
<p>One key is <code>VariableDeclarator</code> and the other is <code>AssignmentExpression</code>, which can be used to control the destructuring requirement for each of those types independently. Each property accepts an object that accepts two properties, <code>array</code> and <code>object</code>, which can be used to control the destructuring requirement for each of <code>array</code> and <code>object</code> independently for variable declarations and assignment expressions.  By default, <code>array</code> and <code>object</code> are set to true for both <code>VariableDeclarator</code> and <code>AssignmentExpression</code>.</p>
<p>The rule has a second object with a single key, <code>enforceForRenamedProperties</code>, which determines whether the <code>object</code> destructuring applies to renamed variables.</p>
<p>Examples of <strong>incorrect</strong> code for this rule:</p>
<div class="highlight"><pre><span></span><span class="c1">// With `array` enabled</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="c1">// With `object` enabled</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">];</span>
</pre></div>
<p>Examples of <strong>correct</strong> code for this rule:</p>
<div class="highlight"><pre><span></span><span class="c1">// With `array` enabled</span>
<span class="kd">var</span> <span class="p">[</span> <span class="nx">foo</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">someIndex</span><span class="p">];</span>

<span class="c1">// With `object` enabled</span>
<span class="kd">var</span> <span class="p">{</span> <span class="nx">foo</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">bar</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">foo</span><span class="p">;</span>
<span class="p">({</span> <span class="nx">foo</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">object</span><span class="p">);</span>
</pre></div>
<p>Examples of <strong>incorrect</strong> code when <code>enforceForRenamedProperties</code> is enabled:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">bar</span><span class="p">;</span>
</pre></div>
<p>Examples of <strong>correct</strong> code when <code>enforceForRenamedProperties</code> is enabled:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="p">{</span> <span class="nx">bar</span><span class="o">:</span> <span class="nx">foo</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
</pre></div>
<p>An example configuration, with the defaults <code>array</code> and <code>object</code> filled in, looks like this:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;prefer-destructuring&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nt">&quot;array&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;enforceForRenamedProperties&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The two properties, <code>array</code> and <code>object</code>, which can be used to turn on or off the destructuring requirement for each of those types independently. By default, both are true.</p>
<p>For example, the following configuration enforces only object destructuring, but not array destructuring:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;prefer-destructuring&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nt">&quot;array&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>An example configuration, with the defaults <code>VariableDeclarator</code> and <code>AssignmentExpression</code> filled in, looks like this:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;prefer-destructuring&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nt">&quot;VariableDeclarator&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;array&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nt">&quot;AssignmentExpression&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;array&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;enforceForRenamedProperties&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The two properties, <code>VariableDeclarator</code> and <code>AssignmentExpression</code>, which can be used to turn on or off the destructuring requirement for <code>array</code> and <code>object</code>. By default, all values are true.</p>
<p>For example, the following configuration enforces object destructuring in variable declarations and enforces array destructuring in assignment expressions.</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;prefer-destructuring&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nt">&quot;VariableDeclarator&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;array&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nt">&quot;AssignmentExpression&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;array&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;enforceForRenamedProperties&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Examples of <strong>correct</strong> code when object destructuring in <code>VariableDeclarator</code> is enforced:</p>
<div class="highlight"><pre><span></span><span class="cm">/* eslint prefer-destructuring: [&quot;error&quot;, {VariableDeclarator: {object: true}}] */</span>
<span class="kd">var</span> <span class="p">{</span><span class="nx">bar</span><span class="o">:</span> <span class="nx">foo</span><span class="p">}</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
</pre></div>
<p>Examples of <strong>correct</strong> code when array destructuring in <code>AssignmentExpression</code> is enforced:</p>
<div class="highlight"><pre><span></span><span class="cm">/* eslint prefer-destructuring: [&quot;error&quot;, {AssignmentExpression: {array: true}}] */</span>
<span class="p">[</span><span class="nx">bar</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">;</span>
</pre></div>
<h2>When Not To Use It</h2>
<p>If you want to be able to access array indices or object properties directly, you can either configure the rule to your tastes or disable the rule entirely.</p>
<p>Additionally, if you intend to access large array indices directly, like:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</pre></div>
<p>Then the <code>array</code> part of this rule is not recommended, as destructuring does not match this use case very well.</p>
<p>Or for non-iterable 'array-like' objects:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jquery&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="kd">var</span> <span class="p">[</span><span class="nx">bar</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span> <span class="c1">// fails with a TypeError</span>
</pre></div>
<h2>Further Reading</h2>
<p>If you want to learn more about destructuring, check out the links below:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">Destructuring Assignment (MDN)</a></li>
<li><a href="http://2ality.com/2015/01/es6-destructuring.html">Destructuring and parameter handling in ECMAScript 6 (2ality blog)</a></li>
</ul>

    </section>
</article>
